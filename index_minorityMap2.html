<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="utf-8" />
	<meta content='' name='description' />
    <meta content='' name='author' />
    
	<title>Minority Population in Connecticut</title>
	
	<!-- Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/custom.css"/>
	
	</head>
	
	<body>
	
	
	<div class='container'>
		<div class='well'>
		<div class='row'>
        <div class="col-xs-8 col-sm-6">
		
			<div class="col-xs-8 col-sm-6">	
			<h4>
              Population Layer
            </h4>
              <label class='checkbox inline'>
                  <input type='checkbox' id='kmlLayer' checked /> <!--hides Polygon1 label --> <!--removed class='hidden'; replaced type='radio' to 'checkbox' -NV -->
                  Minority Population
              </label>
			  
			  <img src = "http://magic.lib.uconn.edu/test/n/images/dotDens_legend1.png" align = 'middle'>
			  
			</div>
			
			<div class="col-xs-8 col-sm-6">
			<h4>
              Polygons
            </h4>
              <label class='checkbox inline'>
                  <input type='checkbox' name='types'  id='layer' checked /> <!--hides Polygon1 label --> <!--removed class='hidden'; replaced type='radio' to 'checkbox' -NV -->
                  Opportunity Index
              </label>
			</div>
			
			
		</div>	
		</div>
		</div>
	</div>

	  
	<style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 30px;
		width: 100%;
      }
	</style> 	
    
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    <script>
	
function initialize() {
  var ct = new google.maps.LatLng(41.613817,-72.723780);
  var mapOptions = {
    zoom: 9,
    center: ct,
	mapTypeId: google.maps.MapTypeId.ROADMAP,
	styles: [
        {
          stylers: [
            { saturation: -100 }, // MODIFY Saturation and Lightness if needed
            { lightness: 40 }     // Current values make thematic polygon shading stand out over base map
          ]
        }
      ]
  };

  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  var kmlLayer = new google.maps.KmlLayer({
	
	url: 'http://magic.lib.uconn.edu/test/n/kml/DotDens250.kmz', preserveViewport: true 
  });
  
  kmlLayer.setMap(map);

  layer = new google.maps.FusionTablesLayer({
      map: map,
      heatmap: { enabled: false },
      query: {
        select: "col2",
        from: "1USNX8O7rNhgTRY6EvrXQsXRFR2b0m_E9nsC_EXDo",
        where: ""
      },
      options: {
        styleId: 2,
        templateId: 2
      }
    });
	
	doSearch();
	
}

function doSearch() {
	// KML
	if ($("#kmlLayer").is(':checked')) {	
      kmlLayer.setMap(map);
    } else {
	  kmlLayer.setMap(null);
	}

    // MODIFY if needed: shows background polygon layer depending on which checkbox is selected
    if ($("#rbPolygon1").is(':checked')) {
      layer.setMap(map);
    }

}
		
google.maps.event.addDomListener(window, 'load', initialize);



    </script>
	
	<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/jquery.address.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&v=3.14"></script>
    <script type="text/javascript" src="js/jquery.geocomplete.min.js"></script>
    <script type="text/javascript" src="js/maps_lib.js"></script>
    <script type='text/javascript'>
	//<![CDATA[
        $(window).resize(function () {
          var h = $(window).height(),
            offsetTop = 105; // Calculate the top offset
        
          $('#map_canvas').css('height', (h - offsetTop));
        }).resize();
			
		

         // $(':checkbox').click(function(){
           // MapsLib.doSearch();
          //});

          
      //]]>	
	
	
    
	  </script>
	

    <div id="map-canvas"></div>
	
	
  </body>
</html>

